vlm: # https://huggingface.co/Qwen/Qwen2.5-VL-7B-Instruct
  model-id: Qwen/Qwen2.5-VL-7B-Instruct
  load:
    device_map: auto
    dtype: bfloat16
    attn_implementation: sdpa
    max_memory: {0: "16GiB", cpu: "0GiB"}
  generate:
    max_new_tokens: 512
  quantization:
    enabled: true
    load_in_8bit: true
    load_in_4bit: false

prompts:
  system: |
    You are a military expert performing a visual-only assessment of a military strike.
    Do not hallucinate. If information is not visible or not relevant to strike assessment, say so in the logic fields.

  classify: |
    Identify which target categories are present in the image.
    Allowed categories (use these keys exactly): {categories}
    Return a comma-separated list of exact category keys ONLY (example: "bunkers, dams_and_locks").
    If none are present, return the empty string (example: "").

  report: |
    A model has identified the following target categories that may or may not be present in the scene: {categories}

    You are given doctrinal definitions for these specific target categories: {doctrine}

    Judge the entire scene as a whole and understand the total number of targets. Use the doctrinal information which may or may not be relevant to assess:
    1) Per-target physical damage category
    2) Per-target physical damage confidence levels:
    CONFIRMED — (>= 95 percent confidence)
    PROBABLE — (50 to 94 percent confidence)
    POSSIBLE — (<50 percent confidence)
    3) Overall scene functional damage assessment.

    Output a JSON object that matches this schema.
    For each target section, use upper case case doctrinal categories only, or skip if none exist.
    For the functional damage section, use upper case doctrinal functional damage categories only, do not skip this section.
    {
      "physical_damage": {
        "target_1": {
          "target_type": "string", 
          "damage_category": "string",
          "confidence_level": "string",
          "brief_supporting_logic": "string"
        },
        "target_n": {
          "target_type": "string",
          "damage_category": "string",
          "confidence_level": "string",
          "brief_supporting_logic": "string"
        }
      },
      "functional_damage": {
        "functional_damage_level": "string",
        "brief_supporting_logic": "string"
      }
    }
