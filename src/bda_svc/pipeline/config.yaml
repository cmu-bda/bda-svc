vlm:
  model-id: OpenGVLab/InternVL3-8B-hf
  pipeline-kwargs:
    max_new_tokens: 512
    device_map: auto
    dtype: auto
    trust_remote_code: true
  quantization-kwargs:
    enabled: false
    load_in_8bit: false
    load_in_4bit: false

prompts:
  system: |
    You are a military expert performing a visual-only assessment of a military strike.
    Do not hallucinate. If information is not visible or not relevant to strike assessment, say so in the logic fields.

  classify: |
    Identify which target categories are present in the image.
    Allowed categories (use these keys exactly): {categories}
    Return a comma-separated list of exact category keys ONLY (example: "bunkers, bunkers, dams_and_locks").
    If none are present, return the empty string (example: "").

  report: |
    A model has identified the following targets that may or may not be present in the scene: {categories}

    You are given doctrinal definitions for these specific target categories:
    {doctrine}

    Judge the entire scene as a whole. Use the doctrinal information which may or may not be relevant to assess:
    1) Per-target physical damage category
    2) Per-target physical damage confidence levels:
    CONFIRMED — (>= 95 percent confidence)
    PROBABLE — (50 to 94 percent confidence)
    POSSIBLE — (<50 percent confidence)
    3) Overall scene functional damage assessment.

    For each target section, skip if none exist.
    For the functional damage section, use the "NO FUNCTIONAL DAMAGE" category if no targets exist.
    Use only lowercase doctrinal definitions for target type, damage categories, and confidence_level.

    Output a JSON object that exactly matches this schema.
    {
      "physical_damage": {
        "target_1": {
          "target_type": "string", 
          "damage_category": "string",
          "confidence_level": "string",
          "brief_supporting_logic": "string"
        },
        "target_n": {
          "target_type": "string",
          "damage_category": "string",
          "confidence_level": "string",
          "brief_supporting_logic": "string"
        }
      },
      "functional_damage": {
        "functional_damage_level": "string",
        "brief_supporting_logic": "string"
      }
    }
